{
  "debugId": "559449be9252ad5a53acfcb1a80df3f8",
  "name": "retry_test_3_8439ff14",
  "jobStatus": {
    "username": "zhiyuhe",
    "state": "FAILED",
    "subState": "Completed",
    "executionType": "START",
    "retries": 10,
    "retryDetails": {
      "user": 10,
      "platform": 0,
      "resource": 0
    },
    "retryDelayTime": null,
    "createdTime": 1600420855000,
    "completedTime": 1600421329000,
    "attemptId": "9",
    "attemptState": "FAILED",
    "appId": "10_3d6692b8-7dbd-41f3-b7b0-0d4f1241e0d4",
    "appProgress": 1,
    "appTrackingUrl": "",
    "appLaunchedTime": 1600421329000,
    "appCompletedTime": 1600421329000,
    "appExitCode": 255,
    "appExitSpec": {
      "code": 255,
      "phrase": "PAIRuntimeUnknownFailed",
      "issuer": "PAI_RUNTIME",
      "causer": "UNKNOWN",
      "type": "UNKNOWN_FAILURE",
      "stage": "UNKNOWN",
      "behavior": "UNKNOWN",
      "reaction": "RETRY_TO_MAX",
      "reason": "User command failed but the failure cannot be recognized by PAI Runtime",
      "repro": ["User program directly exits with exitcode 1"],
      "solution": [
        "Check container log and find root cause",
        "Wait result from next retry"
      ]
    },
    "appExitDiagnostics": "Pod failed: PodPattern matched:\ncontainers:\n  - name: app\n    message: |-\n      [PAI_RUNTIME_ERROR_START]\n      exitCode: 255\n      originUserExitCode: 133\n      errorLogs:\n        user: |\n          PAI_JOB_TASK_ROLE_LIST=taskrole\n          PAI_CONTAINER_HOST_IP=10.151.40.240\n          DSHUTTLE_SERVICE_SERVICE_PORT_RPC=30998\n          PATH=/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n          FC_TASKROLE_NAME=taskrole\n          DSHUTTLE_SERVICE_SERVICE_PORT_JOB_WEB=31002\n          PAI_JOB_NAME=zhiyuhe~retry_test_3_8439ff14\n          PAI_TASKS_NUM=2\n          KUBERNETES_SERVICE_HOST=10.192.0.1\n          PAI_taskrole_1_http_PORT=24098\n          DSHUTTLE_SERVICE_PORT_31002_TCP_PORT=31002\n          PAI_TASK_ROLE_LIST=taskrole\n          GIT_CLONE=git clone --depth 10\n          _=/usr/bin/printenv\n        platform: |\n          Info:2020/09/18 09:29:02 logger.go:39: start to generate the exit summary\n\n      [PAI_RUNTIME_ERROR_END]\n    code: 255\n",
    "appExitMessages": {
      "container": null,
      "runtime": {
        "exitCode": 255,
        "originUserExitCode": 133,
        "errorLogs": {
          "user": "PAI_JOB_TASK_ROLE_LIST=taskrole\nPAI_CONTAINER_HOST_IP=10.151.40.240\nDSHUTTLE_SERVICE_SERVICE_PORT_RPC=30998\nPATH=/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nFC_TASKROLE_NAME=taskrole\nDSHUTTLE_SERVICE_SERVICE_PORT_JOB_WEB=31002\nPAI_JOB_NAME=zhiyuhe~retry_test_3_8439ff14\nPAI_TASKS_NUM=2\nKUBERNETES_SERVICE_HOST=10.192.0.1\nPAI_taskrole_1_http_PORT=24098\nDSHUTTLE_SERVICE_PORT_31002_TCP_PORT=31002\nPAI_TASK_ROLE_LIST=taskrole\nGIT_CLONE=git clone --depth 10\n_=/usr/bin/printenv\n",
          "platform": "Info:2020/09/18 09:29:02 logger.go:39: start to generate the exit summary\n"
        },
        "name": "app"
      },
      "launcher": null
    },
    "appExitTriggerMessage": "FailedTaskCount 1 has reached MinFailedTaskCount 1 in the TaskRole",
    "appExitTriggerTaskRoleName": "taskrole",
    "appExitTriggerTaskIndex": 0,
    "appExitType": "Failed",
    "virtualCluster": "default",
    "submissionTime": 1600420855559
  },
  "taskRoles": {
    "taskrole": {
      "taskRoleStatus": {
        "name": "taskrole"
      },
      "taskStatuses": [
        {
          "taskIndex": 0,
          "taskUid": "421",
          "taskState": "SUCCEEDED",
          "retries": 2,
          "accountableRetries": 2,
          "createdTime": 1600421290000,
          "completedTime": 1600421323000,
          "attemptId": 1,
          "attemptState": "FAILED",
          "currentAttemptLaunchedTime": 1600421315000,
          "currentAttemptCompletedTime": 1600421323000,
          "containerId": "9f7feb72-9aae-4410-b81f-3bf92b5d411f",
          "containerIp": "10.151.40.240",
          "containerNodeName": "node16",
          "containerPorts": {
            "ssh": "24653",
            "http": "21620"
          },
          "containerGpus": null,
          "containerLog": "/log-manager/10.151.40.240:9103/tail/zhiyuhe/559449be9252ad5a53acfcb1a80df3f8/taskrole/9f7feb72-9aae-4410-b81f-3bf92b5d411f/",
          "containerExitCode": 255,
          "containerExitSpec": {
            "code": 255,
            "phrase": "PAIRuntimeUnknownFailed",
            "issuer": "PAI_RUNTIME",
            "causer": "UNKNOWN",
            "type": "UNKNOWN_FAILURE",
            "stage": "UNKNOWN",
            "behavior": "UNKNOWN",
            "reaction": "RETRY_TO_MAX",
            "reason": "User command failed but the failure cannot be recognized by PAI Runtime",
            "repro": ["User program directly exits with exitcode 1"],
            "solution": [
              "Check container log and find root cause",
              "Wait result from next retry"
            ]
          },
          "containerExitDiagnostics": "Pod failed: PodPattern matched:\ncontainers:\n  - name: app\n    message: |-\n      [PAI_RUNTIME_ERROR_START]\n      exitCode: 255\n      originUserExitCode: 133\n      errorLogs:\n        user: |\n          PAI_JOB_TASK_ROLE_LIST=taskrole\n          PAI_CONTAINER_HOST_IP=10.151.40.240\n          DSHUTTLE_SERVICE_SERVICE_PORT_RPC=30998\n          PATH=/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n          FC_TASKROLE_NAME=taskrole\n          DSHUTTLE_SERVICE_SERVICE_PORT_JOB_WEB=31002\n          PAI_JOB_NAME=zhiyuhe~retry_test_3_8439ff14\n          PAI_TASKS_NUM=2\n          KUBERNETES_SERVICE_HOST=10.192.0.1\n          PAI_taskrole_1_http_PORT=24098\n          DSHUTTLE_SERVICE_PORT_31002_TCP_PORT=31002\n          PAI_TASK_ROLE_LIST=taskrole\n          GIT_CLONE=git clone --depth 10\n          _=/usr/bin/printenv\n        platform: |\n          Info:2020/09/18 09:29:02 logger.go:39: start to generate the exit summary\n\n      [PAI_RUNTIME_ERROR_END]\n    code: 255\n"
        },
        {
          "taskIndex": 1,
          "taskUid": "673",
          "taskState": "SUCCEEDED",
          "retries": 2,
          "accountableRetries": 2,
          "createdTime": 1600421290000,
          "completedTime": 1600421323000,
          "attemptId": 1,
          "attemptState": "FAILED",
          "currentAttemptLaunchedTime": 1600421315000,
          "currentAttemptCompletedTime": 1600421323000,
          "containerId": "9f7feb72-9aae-4410-b81f-3bf92b5d411f",
          "containerIp": "10.151.40.240",
          "containerNodeName": "node16",
          "containerPorts": {
            "ssh": "24653",
            "http": "21620"
          },
          "containerGpus": null,
          "containerLog": "/log-manager/10.151.40.240:9103/tail/zhiyuhe/559449be9252ad5a53acfcb1a80df3f8/taskrole/9f7feb72-9aae-4410-b81f-3bf92b5d411f/",
          "containerExitCode": 255,
          "containerExitSpec": {
            "code": 255,
            "phrase": "PAIRuntimeUnknownFailed",
            "issuer": "PAI_RUNTIME",
            "causer": "UNKNOWN",
            "type": "UNKNOWN_FAILURE",
            "stage": "UNKNOWN",
            "behavior": "UNKNOWN",
            "reaction": "RETRY_TO_MAX",
            "reason": "User command failed but the failure cannot be recognized by PAI Runtime",
            "repro": ["User program directly exits with exitcode 1"],
            "solution": [
              "Check container log and find root cause",
              "Wait result from next retry"
            ]
          },
          "containerExitDiagnostics": "Pod failed: PodPattern matched:\ncontainers:\n  - name: app\n    message: |-\n      [PAI_RUNTIME_ERROR_START]\n      exitCode: 255\n      originUserExitCode: 133\n      errorLogs:\n        user: |\n          PAI_JOB_TASK_ROLE_LIST=taskrole\n          PAI_CONTAINER_HOST_IP=10.151.40.240\n          DSHUTTLE_SERVICE_SERVICE_PORT_RPC=30998\n          PATH=/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n          FC_TASKROLE_NAME=taskrole\n          DSHUTTLE_SERVICE_SERVICE_PORT_JOB_WEB=31002\n          PAI_JOB_NAME=zhiyuhe~retry_test_3_8439ff14\n          PAI_TASKS_NUM=2\n          KUBERNETES_SERVICE_HOST=10.192.0.1\n          PAI_taskrole_1_http_PORT=24098\n          DSHUTTLE_SERVICE_PORT_31002_TCP_PORT=31002\n          PAI_TASK_ROLE_LIST=taskrole\n          GIT_CLONE=git clone --depth 10\n          _=/usr/bin/printenv\n        platform: |\n          Info:2020/09/18 09:29:02 logger.go:39: start to generate the exit summary\n\n      [PAI_RUNTIME_ERROR_END]\n    code: 255\n"
        }
      ]
    },
    "taskrole2": {
      "taskRoleStatus": {
        "name": "taskrole2"
      },
      "taskStatuses": [
        {
          "taskIndex": 0,
          "taskUid": "111",
          "taskState": "SUCCEEDED",
          "retries": 1,
          "accountableRetries": 1,
          "createdTime": 1600421290000,
          "completedTime": 1600421323000,
          "attemptId": 0,
          "attemptState": "FAILED",
          "currentAttemptLaunchedTime": 1600421315000,
          "currentAttemptCompletedTime": 1600421323000,
          "containerId": "9f7feb72-9aae-4410-b81f-3bf92b5d411f",
          "containerIp": "10.151.40.240",
          "containerNodeName": "node16",
          "containerPorts": {
            "ssh": "24653",
            "http": "21620"
          },
          "containerGpus": null,
          "containerLog": "/log-manager/10.151.40.240:9103/tail/zhiyuhe/559449be9252ad5a53acfcb1a80df3f8/taskrole/9f7feb72-9aae-4410-b81f-3bf92b5d411f/",
          "containerExitCode": -230,
          "containerExitSpec": {
            "code": -230,
            "phrase": "DeleteTaskRequested",
            "issuer": "PAI_FC",
            "causer": "USER_SCALEDOWN",
            "type": "USER_STOP",
            "stage": "UNKNOWN",
            "behavior": "PERMANENT",
            "reaction": "RETRY_TO_MAX",
            "reason": "User has requested to delete the Task by Job ScaleDown",
            "repro": ["ScaleDown a job with long running container"],
            "solution": []
          },
          "containerExitDiagnostics": "User has requested to delete the Task by Framework ScaleDown"
        }
      ]
    }
  }
}
